<!DOCTYPE html>
<html lang="ko">
<head>
</head>
<body>
  
  <script>

    // 함서 정의
    const func = function() {
      // 매개변수로 resolve, reject 함수를 선언
      // promise를 처리할 때 사용
      // promise는 작업의 처리 상태에 따라 진행이 되는데 진행시킬 때  resolve와 reject를 사용
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          // resolve('success'); 
          resolve('fail..'); 
        }, 5000);
        // reject(100);
      });
    }
    // 아직 5초가 되지 않았기 때문에 작업이 끝나지 않음
    // promise 객체의 현재 상태는 pending(대기)
    console.log(func());

    // 다음 작업을 처리할때는 then() 또는 catch()를 사용

    // promise의 상태가 fulfilled(작업성공)일 때 resolve가 호출되고 then()이 실행됨
    // promise의 상태가 pending -> fulfilled(작업성공) -> then
    // promise의 상태가 pending -> rejected(작업실패) -> catch
    const pro = func();

    // then함수는 다시 promise 객체를 반환
    // 다시 체이닝 기법을 사용하여 catch함수를 호출
    pro
    .then((response) => {
      console.log(response);
    })
    .catch((result) => {
      console.log(result);
    });

    // // promise 객체가 반환됐고 현재상태는 fulfilled(작업성공)
    // // 작업에 성공했으면 
    // func().then((res) => {
    //   console.log(res); 
    // });

  </script>

</body>
</html>